<!DOCTYPE html>

<html>

  <head>
    <script src="https://aframe.io/releases/0.4.0/aframe.min.js"></script>
    <script src="components/aframe-obj-loader-component.min.js"></script>
    <script src="components/aframe-text-component.js"></script>
    <script src="scripts/master_block.js"></script>
    <script src="scripts/face_block.js"></script>

    <script src="https://npmcdn.com/aframe-animation-component@3.0.1"></script>
    <script src="https://npmcdn.com/aframe-event-set-component@3.0.1"></script>
    <script src="https://npmcdn.com/aframe-layout-component@3.0.1"></script>
    <script src="https://npmcdn.com/aframe-template-component@3.1.1"></script>
    <script src="scripts/set-image.js"></script>
    
  </head>


  <body>

    <a-scene>
      <a-assets timeout="3000">

	<a-asset-item id="nameFont" src="fonts/name_font.json"></a-asset-item>
	
	<script id="change_wall" type="text/html">
	  <a-entity class="change_wall"
		    geometry="primitive: plane; height: 10; width: 1"
		    material="shader: flat; color: white"
		    event-set__1="_event: mouseenter; material.color: red"
		    event-set__2="_event: mouseup; scale: 1.2 1.2 1"
		    set-image="on: mouseenter; target: #floor; src: ${src}">
	  </a-entity>
	</script>
	<img id="tower" crossorigin="anonymous" src="img/ut_tower.jpg">
	<img id="city" crossorigin="anonymous" src="https://cdn.aframe.io/360-image-gallery-boilerplate/img/city.jpg">
      </a-assets>
      
      <a-sky id="background" src="#city"></a-sky>

      <!-- face block collapsed -->
      <a-box id="faceBlock" scale="2 5 .5" position="2 0 -4" color="#c4c5c0"></a-box>
      <a-cylinder id="faceBlockExpand" rotation="90 0 0" scale="0 0 0" position="1 2.5 -4" color="#c4c5c0">
	<a-cylinder position="0 .3 0" opacity="0"></a-cylinder>
      </a-cylinder>
      
      <a-entity id="faceBlockExpandToken" scale=" 0 0 0" position=".76 2.32 -3.73" text="text: +; font: #nameFont" material="color: green"></a-entity>
      <a-cylinder id="faceBlockMirrorExpand" rotation="90 0 0" scale="0 0 0" position="1 -2.5 -4" color="#c4c5c0"></a-cylinder>
      <a-entity id="faceBlockMirrorExpandToken" scale=" 0 0 0" position=".76 -2.68 -3.75" text="text: +; font: #nameFont" material="color: green"></a-entity>
      
      <a-plane id="FBCProfessional" color="white" src="img/professional.png" position="2 .4583 -3.745" scale="2 .75 1"></a-plane>
      <a-plane id="FBCProfessionalReflection" color="white" src="img/professionalMirror.png" position="2 -.4583 -3.745" scale="2 .75 1"></a-plane>
      <a-plane id="FBCAcademic" src="img/academic.png" position="2 1.29163 -3.745" scale="2 .75 1"></a-plane>
      <a-plane id="FBCAcademicReflection" src="img/academicMirror.png" position="2 -1.29163 -3.745" scale="2 .75 1"></a-plane>
      <a-plane id="FBCPersonal" src="img/personal.png" position="2 2.125 -3.745" scale="2 .75 1"></a-plane>
      <a-plane id="FBCPersonalReflection" src="img/personalMirror.png" position="2 -2.125 -3.745" scale="2 .75 1"></a-plane>
      <a-plane id="FBInterfaceLayer" opacity="0" position="2 1.25 -3.744" scale="2 2.5 1"></a-plane>

      <!-- floor and name -->
      <a-plane id="floor" scale="10 10  10" rotation="-90 0 0" material="src: img/white_marble.jpg; color: grey; opacity: .8"></a-plane>
      <a-entity id="nameTag" scale=".5 .5 .5" position="-2 .5 -4" text="text: Benjamin Baker; font: #nameFont" material="color: green"></a-entity>
      <a-entity id="nameTagReflection" scale=".5 -.5 .5" position="-2 -.5 -4" text="text: Benjamin Baker; font: #nameFont" material="color: green"></a-entity>


      <!-- master block -->

      <a-cylinder id="MBCollapse" rotation="90 0 0" scale="0 0 0" position="-2 2.5 -3.998" color="#c4c5c0">
	<a-cylinder position="0 .3 0" opacity="0"></a-cylinder>
      </a-cylinder>
      <a-entity id="MBCollapseToken" scale="0 0 0" position="-2.2 2.32 -3.87" text="text: -; font: #nameFont" material="color: green"></a-entity>

      <a-cylinder id="MBMirrorCollapse" rotation="90 0 0" scale="0 0 0" position="-2 -2.5 -3.998" color="#c4c5c0">
	<a-cylinder position="0 .3 0" opacity="0"></a-cylinder>
      </a-cylinder>
      <a-entity id="MBMirrorCollapseToken" scale="0 0 0" position="-2.2 -2.68 -3.87" text="text: -; font: #nameFont" material="color: green"></a-entity>


      
      <a-box id="MB1" scale="0 0 0" color="#c4c5c0" position="0.5 .41666 -4">
	<a-plane id="MBFace1" color="white" src="img/masterProfessional.png" scale=".95 .80 1" color="#c4c5c0" position="0 0 .51">

	</a-plane>
	<a-plane id="MBFace1R" scale=".95 .80 1" color="white" color="white" src="img/masterProfessionalMirror.png" position="0 -1 .51"></a-plane>
	<a-box position = "0 0 .1" opacity="0"></a-box>
	<a-box id="MB1Reflection" color="#c4c5c0" position="0 -1 0"></a-box>

      </a-box>
      <a-cylinder id="MB1Button" rotation="90 0 0" scale="0 0 0" color="#c4c5c0" position="2.62 .42 -3.95"></a-cylinder>
      <a-cylinder id="MB2Button" rotation="90 0 0" scale="0 0 0" color="#c4c5c0" position="2.62 1.25 -3.95"></a-cylinder>
      <a-cylinder id="MB3Button" rotation="90 0 0" scale="0 0 0" color="#c4c5c0" position="2.62 2.08 -3.95"></a-cylinder>

      <a-cylinder id="MB1ButtonR" rotation="90 0 0" scale="0 0 0" color="#c4c5c0" position="2.62 -.42 -3.95"></a-cylinder>
      <a-cylinder id="MB2ButtonR" rotation="90 0 0" scale="0 0 0" color="#c4c5c0" position="2.62 -1.25 -3.95"></a-cylinder>
      <a-cylinder id="MB3ButtonR" rotation="90 0 0" scale="0 0 0" color="#c4c5c0" position="2.62 -2.08 -3.95"></a-cylinder>
      
      <a-box id="MB2" scale="0 0 0" color="#c4c5c0" position="0.5 1.25 -4">
	<a-plane id="MBFace2" color="white" src="img/masterAcademic.png" scale=".95 .80 1" color="#c4c5c0" position="0 0 .51"></a-plane>
	<a-plane id="MBFace2R" scale=".95 .80 1" color="white" color="white" src="img/masterAcademicMirror.png" position="0 -3 .51"></a-plane>
	<a-box position = "0 0 .1" opacity="0"></a-box>
	<a-box id="MB2Reflection" color="#c4c5c0" position="0 -3 0"></a-box>
      </a-box>
      <a-box id="MB3" scale="0 0 0" color="#c4c5c0" position="0.5 2.08333 -4">
	<a-plane id="MBFace3" color="white" src="img/masterPersonal.png" scale=".95 .80 1" color="#c4c5c0" position="0 0 .51"></a-plane>
	<a-plane id="MBFace3R" color="white" src="img/masterPersonalMirror.png" scale=".95 .80 1" color="#c4c5c0" position="0 -5 .51"></a-plane>
	<a-box scale="0 0 0"position = "0 0 .1" opacity="0"></a-box>
	<a-box id="MB3Reflection" color="#c4c5c0" position="0 -5 0"></a-box>
      </a-box>

      <a-entity template="src: #change_wall" data-src="img/floor_personal.png"></a-entity>      
      <a-camera>
	<a-cursor></a-cursor>
      </a-camera>

    </a-scene>
  </body>
  <script>

    //entities we want to listen to
    var faceBlockInterface = document.getElementById('FBInterfaceLayer');
    var faceBlockExpand = document.getElementById('faceBlockExpand');


    //listeners for eyeover face block
    faceBlockInterface.addEventListener('mouseenter', function () {
    face_block_token_expand();
    });

    //listeners for eye exit face block
    FBInterfaceLayer.addEventListener('mouseleave', function () {
    faceBlockExpandToken.setAttribute('scale', {x: 0, y: 0, z: 0});
    faceBlockMirrorExpandToken.setAttribute('scale', {x: 0, y: 0, z: 0});
    faceBlockExpand.setAttribute('scale', {x: 0, y: 0, z: 0});
    faceBlockMirrorExpand.setAttribute('scale', {x: 0, y: 0, z: 0});
    });

    //listener for eye over expansion block
    faceBlockExpand.addEventListener('mouseenter', function () {
    collapse_face_block();
    expand_master_block();
    });


    //listeners for master blocks
    MBCollapse.addEventListener('mouseenter', function() {
    collapse_master_block();
    expand_face_block();
    });

    MB1.addEventListener('mouseenter', function () {
    unselect_face([MB2, MB3], [MB2Button, MB3Button], [MB2Reflection, MB3Reflection], [MB2ButtonR, MB3ButtonR]);
    MB1.setAttribute('color', 'green');
    MB1Reflection.setAttribute('color', 'green');
    MB1Button.setAttribute('scale', {x: .25, y: .5, z: .25});
    MB1ButtonR.setAttribute('scale', {x: .25, y: .5, z: .25});
    });

    MB2.addEventListener('mouseenter', function () {
    unselect_face([MB1, MB3], [MB1Button, MB3Button], [MB1Reflection, MB3Reflection], [MB1ButtonR, MB3ButtonR]);
    MB2.setAttribute('color', 'green');
    MB2Reflection.setAttribute('color', 'green');
    MB2Button.setAttribute('scale', {x: .25, y: .5, z: .25});
    MB2ButtonR.setAttribute('scale', {x: .25, y: .5, z: .25});
    });

    MB3.addEventListener('mouseenter', function () {
    unselect_face([MB1, MB2], [MB1Button, MB2Button], [MB1Reflection, MB2Reflection], [MB1ButtonR, MB2ButtonR]);
    MB3.setAttribute('color', 'green');
    MB3Reflection.setAttribute('color', 'green');
    MB3Button.setAttribute('scale', {x: .25, y: .5, z: .25});
    MB3ButtonR.setAttribute('scale', {x: .25, y: .5, z: .25});
    });

    

    
  </script>
</html>
